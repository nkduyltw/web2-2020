<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <%- include('navbar-link'); -%>
        <link rel="stylesheet" href="/style/user/profile.css">
        <style>
            body {
                padding: 20px 20px;
            }
            
            .results tr[visible='false'],
            .no-result {
                display: none;
            }
            
            .results tr[visible='true'] {
                display: table-row;
            }
            
            .counter {
                padding: 8px;
                color: #ccc;
            }
        </style>
</head>

<body>
    <%- include('navbar-menu'); -%>
        <%- include('navbar-primary'); -%>
            <div class="main-content" style="padding-bottom: 186px;">
                <% if(error){ %>
                    <div class="alert alert-danger" role="alert">
                        <%= error %>
                    </div>
                    <% } %>
                        <!-- <form action="" method="POST" hidden>
                                <div class="form-group">
                                    <label>Số tiền gửi:</label>
                                    <input type="number" class="form-control" name="money">
                                    <small id="emailHelp" class="form-text text-muted">Gửi nhiều vào.</small>
                                </div>
                                <div class="form-group">
                                    <label>Số tháng gửi:</label>
                                    <input type="number" class="form-control" name="duration">
                                </div>
                                <div class="form-group ">
                                    <label for="inputState">Đơn vị tiền tệ</label>
                                    <select id="inputState" class="form-control" name="currency">
                        <option value="1" selected>VNĐ</option>
                        <option value="2">$</option>
                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Nội dung:</label>
                                    <textarea type="text" class="form-control" rows="4" name="note"> </textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Xác nhận</button>
                            </form>-->
                        <h1 style="color: rgb(25, 148, 148);">Tài Khoản Tiết Kiệm</h1>
                        <button class="btn btn-primary" data-toggle="modal" data-target="#CreateTKTKModal">Mở Tài khoản tiết kiệm</button>
                        <div class="form-group pull-right">

                            <input type="text" class="search form-control" placeholder="Nhập từ khóa tìm kiếm">
                        </div>
                        <span class="counter pull-right"></span>
                        <table class="table table-hover table-bordered results">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Mã Code</th>
                                    <th>Số Tài Khoản</th>
                                    <th>Số Tiền</th>
                                    <th>Đơn Vị</th>
                                    <th>Số Tháng Gửi</th>
                                    <th>Ghi Chú</th>
                                    <th>Trạng Thái</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% tktk.forEach(function(item, index){ %>
                                    <tr>
                                        <th scope="row">
                                            <%= index + 1 %>
                                        </th>
                                        <td>
                                            <%= item.TKTKCode %>
                                        </td>
                                        <td>
                                            <%= item.accountNumber.trim() %>
                                        </td>
                                        <td>
                                            <%= item.money %>
                                        </td>
                                        <td>
                                            <% if(item.currency==1){%>
                                                <p>VNĐ</p>
                                                <% } %>
                                                    <% if(item.currency==2){ %>
                                                        <p>Dollars</p>
                                                        <% } %>
                                        </td>
                                        <td>
                                            <%= item.duration %>
                                        </td>
                                        <td>
                                            <%= item.note %>
                                        </td>
                                        <td>
                                            <% if(item.done) { %>
                                                đã hoàn thành
                                                <% }else { %>
                                                    chưa hoàn thành
                                                    <% } %>
                                        </td>
                                    </tr>
                                    <% }); %>
                            </tbody>
                        </table>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="CreateTKTKModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title" id="exampleModalLabel">Mở tài khoản tiết kiệm</h2>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                        </div>
                        <form action="" method="POST">
                            <div class="modal-body">

                                <div class="form-group">
                                    <label>Số tiền gửi:</label>
                                    <input type="number" class="form-control" name="money">
                                    <small id="emailHelp" class="form-text text-muted">Gửi nhiều vào.</small>
                                </div>
                                <div class="form-group">
                                    <label>Số tháng gửi:</label>
                                    <input type="number" class="form-control" name="duration">
                                </div>
                                <div class="form-group ">
                                    <label for="inputState">Đơn vị tiền tệ</label>
                                    <select id="inputState" class="form-control" name="currency">
                                    <option value="1" selected>VNĐ</option>
                                    <option value="2">$</option>
                                </select>
                                </div>
                                <div class="form-group">
                                    <label>Nội dung:</label>
                                    <textarea type="text" class="form-control" rows="4" name="note"> </textarea>
                                </div>


                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Xác nhận</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

</body>
<%- include('../footer.ejs'); -%>
    <script>
        $('.btn-expand-collapse').click(function(e) {
            $('.navbar-primary').toggleClass('collapsed');
        });
    </script>
    <script>
        $(document).ready(function() {
            $(".search").keyup(function() {
                var searchTerm = $(".search").val();
                var listItem = $('.results tbody').children('tr');
                var searchSplit = searchTerm.replace(/ /g, "'):containsi('")

                $.extend($.expr[':'], {
                    'containsi': function(elem, i, match, array) {
                        return (elem.textContent || elem.innerText || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
                    }
                });

                $(".results tbody tr").not(":containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'false');
                });

                $(".results tbody tr:containsi('" + searchSplit + "')").each(function(e) {
                    $(this).attr('visible', 'true');
                });

                var jobCount = $('.results tbody tr[visible="true"]').length;
                $('.counter').text(jobCount + ' item');

                if (jobCount == '0') {
                    $('.no-result').show();
                } else {
                    $('.no-result').hide();
                }
            });
        });
        localStorage.setItem("checkstatus", "not");
    </script>

</html>